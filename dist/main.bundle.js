!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function i(e,t){const n=document.createElement(e);return n.className=t,n}function r(e){e.contentEditable=!0,e.spellcheck=!1,e.addEventListener("keydown",t=>{"Enter"===t.key&&e.blur()})}n.r(t);class o{constructor(e,t,n){this._listElem=n,this._x=e,this._y=t,this._createMenuElem(),this._addOptions(),this._listElem.style.outline="4px solid rgba(100, 158, 180, 0.8)",this.elem.addEventListener("blur",e=>{document.body.removeChild(this.elem),this._listElem.style.outline=""})}_createMenuElem(){this.elem=i("div","list-menu"),document.body.appendChild(this.elem),this.elem.tabIndex=9,this.elem.focus(),this.elem.style.left=this._x+"px",this.elem.style.top=this._y+"px"}_addOptions(){this._newCheckBoxOption("Priority",!1)}_newCheckBoxOption(e,t){const n=i("div","list-menu__option"),r=i("input","list-menu__option-box");r.type="checkbox",r.checked=t,r.addEventListener("mousedown",e=>{e.preventDefault()});const o=i("div","list-menu__option-name");o.textContent=e,n.append(r,o),this.elem.append(n)}}let s=null,l=null;function d(e){e.preventDefault();const t=window.scrollX,n=window.scrollY;new o(e.clientX+t,e.clientY+n,this),window.scrollTo(t,n)}class u{constructor(){this.elem=i("div","list"),this._itemCount=0,this._itemWrapper=this._addItemWrapper(),this._title=this._addTitle(),this._futureItem=this._addFutureItem(),this.elem.addEventListener("contextmenu",d)}_addItemWrapper(){const e=i("div","list__item-wrapper");return this.elem.appendChild(e),e}_addTitle(){const e=document.createElement("div");return e.className="list__title",e.textContent="Title",r(e),e.addEventListener("keydown",e=>{"Enter"===e.key&&0===this._itemCount&&this._futureItem.focus()}),this._itemWrapper.appendChild(e),e}_addFutureItem(){const e=i("div","list__item list__item--add-more");return e.contentEditable="true",function(e,t){t.addEventListener("keydown",n=>function(e,t,n){if("Enter"!==e.key)return;if(t.textContent=t.textContent.trim(),!t.textContent.length)return void e.preventDefault();const i=n.newListItem();i.children[1].textContent=t.textContent,t.textContent="",n._itemWrapper.insertBefore(i,t),e.preventDefault()}(n,t,e))}(this,e),this._itemWrapper.appendChild(e),e}newListItem(){this._itemCount++;const e=function(e){const t=i("div","list__item");t.draggable=!0,t._orderNumber=e;const n=i("div","list__item-order");n.textContent=e+".",t._order=n;const r=i("div","list__item-content");return t._content=r,t.appendChild(n),t.appendChild(r),t.setOrderNumber=function(e){t._order.textContent=0===e?"":e+".",t._orderNumber=e},t.getOrderNumber=function(){return t._orderNumber},t.getContentElem=function(){return t._content},t}(this._itemCount);return function(e,t,n,i){const o=t.getContentElem();function d(){const e=n.children.length-1;for(let t=1;t<e;t++){n.children[t].setOrderNumber(t)}}r(o),o.addEventListener("keydown",n=>{"Enter"===n.key&&(e.getItemCount()===t.getOrderNumber()&&i.focus(),o.textContent=o.textContent.trim(),o.textContent.length||(e.removeItem(t),d()))}),t.addEventListener("dragstart",e=>{s=t,t.getContentElem().classList.add("list__item-content--dragging"),e.dataTransfer.setDragImage(document.createElement("img"),0,0)}),t.addEventListener("dragover",e=>{e.preventDefault();const i=t.getBoundingClientRect();if(e.clientY-i.top-i.height/2<0){if(l===t)return;n.insertBefore(s,t),l=s}else{const e=t.nextElementSibling;if(l===e)return;n.insertBefore(s,e),l=e}d()}),t.addEventListener("dragend",()=>{s.getContentElem().classList.remove("list__item-content--dragging"),s=null})}(this,e,this._itemWrapper,this._futureItem),e}getItemCount(){return this._itemCount}removeItem(e){e.remove(),this._itemCount--}}function c(){const e=(new u).elem;this.parentElement.insertBefore(e,this)}const a=document.createElement("div");document.body.appendChild(a),a.className="lists";(function(e=null){const t=document.createElement("button");return t.className="btn btn--padding",t.textContent="Add new list",t.addEventListener("click",c),e&&e.appendChild(t),t})(a).dispatchEvent(new MouseEvent("click"))}]);